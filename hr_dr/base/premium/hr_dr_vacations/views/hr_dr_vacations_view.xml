<odoo>
    <data>
        <!--hr.register.vacation.initial.balance-->
        <record id="view_register_vacation_initial_balance" model="ir.ui.view">
            <field name="name">hr.register.vacation.initial.balance.form</field>
            <field name="model">hr.register.vacation.initial.balance</field>
            <field name="arch" type="xml">
                <form string="Register vacation initial balance">
                    <group>
                        <group>
                            <field name="employee_id" readonly="1"/>
                            <field name="resource_calendar_id"/>
                            <field name="hours_per_day"/>
                            <field name="cutoff_date"/>
                        </group>
                        <group>
                            <field name="vacations_cutoff_date"/>
                            <field name="detailed_income"/>
                            <field name="vacations_cutoff_date_days" attrs="{'invisible': [('detailed_income','=',False)],'required': [('detailed_income','=',True)]}"/>
                            <field name="vacations_cutoff_date_hours" attrs="{'invisible': [('detailed_income','=',False)],'required': [('detailed_income','=',True)]}"/>
                            <field name="vacations_cutoff_date_minutes" attrs="{'invisible': [('detailed_income','=',False)],'required': [('detailed_income','=',True)]}"/>
                            <field name="register_provisioned_vacations"/>
                            <field name="provisioned_value" widget='monetary' attrs="{'invisible': [('register_provisioned_vacations','=',False)],'required': [('register_provisioned_vacations','=',True)]}"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                            <field name="currency_id" groups="base.group_multi_currency"/>
                        </group>
                    </group>
                    <footer>
                        <button name="action_accept" string="Register initial balance" type="object" class="btn-primary"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>
        <record id="action_register_vacation_initial_balance" model="ir.actions.act_window">
            <field name="name">Register vacation initial balance</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.register.vacation.initial.balance</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_register_vacation_initial_balance"/>
            <field name="target">new</field>
        </record>
        <!--hr.register.vacation.initial.balance-->

        <!--Employee-->
        <record id="employee_vacations_form_view" model="ir.ui.view">
            <field name="name">employee.vacations.form.view</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr_dr_employee.view_employee_form_inherit"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='birthday']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>

                <xpath expr="//button[last()]" position="after">
                    <button string="Create/Update vacation period" type="object" name="action_create_update_vacation_period" states="affiliate,temporal,passant"/>
                    <button name="%(hr_dr_vacations.action_register_vacation_initial_balance)d" string="Register vacation initial balance" type="action" states="affiliate,temporal,passant"/>
                </xpath>

                <xpath expr="//notebook//page[@name='judicial_withholding']" position="after">
                    <page name = "vacations" string="Vacations">
                        <group>
                            <group string="Previous periods">
                                <field name="total_time_in_company_years"/>
                                <field name="total_time_in_company_months"/>
                                <field name="total_time_in_company_days"/>
                            </group>
                            <group string="Cutoff date">
                                <field name="cutoff_date" readonly="1"/>
                                <field name="vacations_cutoff_date" readonly="1"/>
                                <field name="vacations_taken_cutoff_date" readonly="1"/>
                                <field name="total_vacations_accumulated_cutoff_date" readonly="1"/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="total_vacations_available" readonly="1"/>
                                <field name="total_vacations_available_including_proportional_period" readonly="1"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Details">
                                <field name="vacation_detail_ids" nolabel="1" readonly="1">
                                    <tree decoration-danger="lost &gt; 0" decoration-success="available &gt; 0 and ready_to_lost == True">
                                        <field name="sequence"/>
                                        <field name="type"/>
                                        <field name="date_from"/>
                                        <field name="date_to"/>
                                        <field name="days"/>
                                        <field name="standard_accumulated"/>
                                        <field name="accumulated_by_seniority"/>
                                        <field name="increase_by_age"/>

                                        <field name="total_accumulated"/>
                                        <field name="total_accumulated_worked"/>
                                        <field name="total_accumulated_not_worked"/>

                                        <field name="taken"/>
                                        <field name="lost"/>
                                        <field name="paid"/>
                                        <field name="ready_to_lost" invisible="1"/>
                                        <field name="vacation_execution"/>
                                        <field name="permissions"/>
                                        <field name="available"/>

                                        <button name="open_register_paid" string="Register vacation paid" type="object" icon="fa-dollar" attrs="{'invisible': [('available', '&lt;=', 0)]}"/>
                                        <button name="open_register_lost" string="Register vacation lost" type="object" icon="fa-level-down" attrs="{'invisible': ['|',('available', '&lt;=', 0),('ready_to_lost', '=', False)]}"/>
                                    </tree>
                                    <form string="Vacation detail">
                                        <header>
                                            <button name="open_register_paid" string="Register vacation paid" type="object" icon="fa-dollar" attrs="{'invisible': [('available', '&lt;=', 0)]}"/>
                                            <button name="open_register_lost" string="Register vacation lost" type="object" icon="fa-level-down" attrs="{'invisible': ['|',('available', '&lt;=', 0),('ready_to_lost', '=', False)]}"/>
                                        </header>
                                        <sheet>
                                            <group>
                                                <group>
                                                    <field name="ready_to_lost" invisible="1"/>
                                                    <field name="permissions"/>

                                                </group>
                                                <group>
                                                    <field name="available"/>
                                                </group>
                                            </group>
                                        </sheet>
                                        <div class="oe_chatter">
                                            <field name="message_follower_ids"/>
                                            <field name="message_ids"/>
                                        </div>
                                    </form>
                                </field>
                            </page>
                        </notebook>
                    </page>
                </xpath>
            </field>
        </record>
        <!--Employee-->

        <!--Vacation planning request-->
        <record id="view_re-planning_vacation_planning_request" model="ir.ui.view">
            <field name="name">hr.replanning.vacation.planning.request.form</field>
            <field name="model">hr.replanning.vacation.planning.request</field>
            <field name="arch" type="xml">
                <form string="Re-planning vacation planning request">
                    <group>
                        <group string="Current planning">
                            <field name="actual_vacation_planning_request_id" invisible="1"/>
                            <field name="employee_requests_id"/>
                            <field name="department_employee_requests_id"/>
                            <field name="date_from"/>
                            <field name="date_to"/>
                            <field name="date_incorporation"/>
                            <field name="number_of_days"/>
                        </group>
                        <group string="Re-planning">
                            <field name="date_from_new"/>
                            <field name="date_to_new"/>
                            <field name="commentary_new"/>
                        </group>
                    </group>
                    <footer>
                        <button name="action_replanning" string="Re-planning" type="object" class="btn-primary"/>
                        <button name="action_replanning_direct" string="Re-planning direct" type="object"
                                class="btn-primary"
                                groups="hr_dr_vacations.hr_dr_vacations_group_supervisor"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>
        <record id="action_re-planning_vacation_planning_request" model="ir.actions.act_window">
            <field name="name">Re-planning vacation planning request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.replanning.vacation.planning.request</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_re-planning_vacation_planning_request"/>
            <field name="target">new</field>
        </record>

        <record id="hr_vacation_planning_request_view_calendar" model="ir.ui.view">
            <field name="name">hr.vacation.planning.request.calendar</field>
            <field name="model">hr.vacation.planning.request</field>
            <field name="arch" type="xml">
                <calendar string="Vacation planning request" date_start="date_from" date_stop="date_to" mode="month"
                          quick_add="False" color="state">
                    <field name="display_name"/>
                </calendar>
            </field>
        </record>
        <record id="hr_vacation_planning_request_view_kanban" model="ir.ui.view">
            <field name="name">hr.vacation.planning.request.kanban</field>
            <field name="model">hr.vacation.planning.request</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="employee_requests_id"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="date_incorporation"/>
                    <field name="number_of_days"/>
                    <field name="state"/>
                    <field name="commentary"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click container">
                                <div class="row no-gutters">
                                    <div class="col-2">
                                        <img t-att-src="kanban_image('hr.employee', 'image_small', record.employee_requests_id.raw_value)"
                                             t-att-title="record.employee_requests_id.value"
                                             t-att-alt="record.employee_requests_id.value"
                                             width="40" height="40"
                                             class="oe_kanban_avatar float-left mr4 col-md-"/>
                                    </div>
                                    <div class="col-10">
                                        <span class="badge badge-pill float-right mt4 mr16">
                                            <t t-esc="record.number_of_days.value"/>
                                            Día(s)
                                        </span>
                                        <strong class="o_kanban_record_title">
                                            <t t-esc="record.employee_requests_id.value"/>
                                        </strong>
                                        <div class="o_dropdown_kanban dropdown" groups="base.group_user">
                                            <a role="button" class="dropdown-toggle o-no-caret btn"
                                               data-toggle="dropdown" href="#" aria-label="Dropdown menu"
                                               title="Opciones">
                                                <span class="fa fa-ellipsis-v"/>
                                            </a>
                                            <div class="dropdown-menu" role="menu">

                                                <a t-if="record.state.raw_value == 'draft'" role="menuitem" type="edit"
                                                   class="dropdown-item">Edit request
                                                </a>

                                                <a t-if="record.state.raw_value == 'draft'" role="menuitem"
                                                   type="delete" class="dropdown-item">Delete request
                                                </a>

                                                <a t-if="record.state.raw_value == 'draft'"
                                                   name="confirm_request" type="object"
                                                   role="menuitem" class="dropdown-item">Confirm request
                                                </a>

                                                <a t-if="record.state.raw_value == 'pending'"
                                                   name="cancel_request" type="object"
                                                   role="menuitem" class="dropdown-item">Cancel request
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row no-gutters justify-content-end">
                                    <div class="col-4">
                                        <span class="text-muted">Inicio:</span>
                                    </div>
                                    <div class="col-8">
                                        <t t-esc="record.date_from.value"/>
                                    </div>
                                    <div class="w-100"></div>
                                    <div class="col-4">
                                        <span class="text-muted">Fin:</span>
                                    </div>
                                    <div class="col-8">
                                        <t t-esc="record.date_to.value"/>
                                    </div>
                                    <div class="w-100"></div>
                                    <div class="col-4">
                                        <span class="text-muted">Incorporación:</span>
                                    </div>
                                    <div class="col-8">
                                        <t t-esc="record.date_incorporation.value"/>
                                    </div>
                                    <div class="w-100"></div>
                                    <div class="col-4">
                                        <span class="text-muted">Estado:</span>
                                    </div>
                                    <div class="col-8">
                                        <t t-esc="record.state.value"/>
                                    </div>
                                    <div class="w-100"></div>
                                    <div class="col-4">
                                        <span class="text-muted">Comentario:</span>
                                    </div>
                                    <div class="col-8">
                                        <t t-esc="record.commentary.value"/>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <record id="hr_vacation_planning_request_view_tree" model="ir.ui.view">
            <field name="name">hr.vacation.planning.request.tree</field>
            <field name="model">hr.vacation.planning.request</field>
            <field name="arch" type="xml">
                <tree decoration-danger="state == 'rejected'" decoration-success="state == 'approved'" decoration-muted="state in ['replanned','cancelled','draft']" decoration-primary="state == 'pending'">
                    <field name="employee_requests_id" invisible="context.get('invisible_employee_requests_id',False)"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="date_incorporation"/>
                    <field name="number_of_days"/>
                    <field name="state"/>
                    <field name="commentary"/>
                    <!--                    <button string="Confirm Request" icon="fa-check" type="object"
                                            name="confirm_vacation_planning_request"
                                            confirm="¿Está seguro que desea confirmar esta solicitud de planificación de vacaciones?"
                                            attrs="{'invisible': [('state', '!=', 'draft')]}"></button>

                                        <button string="Cancel Request" icon="fa-ban" type="object"
                                            name="cancel_vacation_planning_request"
                                            confirm="¿Está seguro que desea cancelar esta solicitud de planificación de vacaciones?"
                                            attrs="{'invisible': [('state', '!=', 'pending')]}"></button>-->
                </tree>
            </field>
        </record>
        <record id="hr_vacation_planning_request_view_form" model="ir.ui.view">
            <field name="name">hr.vacation.planning.request.form</field>
            <field name="model">hr.vacation.planning.request</field>
            <field name="arch" type="xml">
                <form string="Vacation planning request">
                    <header>
                        <button string="Confirm request" type="object"
                                name="confirm_request"
                                confirm="Are you sure you want to confirm this vacation planning request?"
                                attrs="{'invisible': [('state', '!=', 'draft')]}"/>

                        <button string="Register request" type="object"
                                name="confirm_request_direct"
                                groups="hr_dr_vacations.hr_dr_vacations_group_supervisor"
                                confirm="Are you sure you want to register this vacation planning request?"
                                attrs="{'invisible': [('state', '!=', 'draft')]}"/>

                        <button string="Cancel request" type="object"
                                name="cancel_request"
                                confirm="Are you sure you want to cancel this vacation planning request?"
                                attrs="{'invisible': [('state', '!=', 'pending')]}"/>

                        <button string="Cancel request by admin" type="object"
                                name="cancel_request"
                                confirm="Are you sure you want to cancel this vacation planning request?"
                                groups="hr_dr_vacations.hr_dr_vacations_group_supervisor"
                                attrs="{'invisible': [('state', 'in', ['draft','cancelled','rejected','replanned'])]}"/>

                        <button name="%(hr_dr_vacations.action_re-planning_vacation_planning_request)d"
                                string="Re-planning"
                                type="action"
                                help="Re-planning vacation planning request."
                                attrs="{'invisible': [('state', '!=', 'approved')]}"/>

                        <field name="state" widget="statusbar" statusbar_visible="draft,pending,cancelled,approved,rejected,replanned"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="employee_requests_id" invisible="context.get('invisible_employee_requests_id',False)"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="date_from" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="date_to" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="parent_id" attrs="{'invisible': [('parent_id', '=', False)]}"/>
                            </group>
                            <group>
                                <field name="date_incorporation"/>
                                <field name="number_of_days"/>
                                <field name="reason_reject" attrs="{'invisible': [('state', '!=', 'rejected')]}"/>
                            </group>
                        </group>
                        <group>
                            <field name="commentary" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        </group>
                        <notebook>
                            <page string="Tracing">
                                <field
                                        name="notification_ids"
                                        nolabel="1">
                                    <tree>
                                        <field name="level"/>
                                        <field name="employee_approve_id"/>
                                        <field name="commentary"/>
                                        <field name="state"/>
                                        <field name="send"/>
                                        <field name="processed"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Details">
                                <group>
                                    <group>
                                        <field name="user_confirmation"/>
                                        <field name="user_cancellation"/>
                                    </group>
                                    <group>
                                        <field name="date_confirmation"/>
                                        <field name="date_cancellation"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>
        <record id="hr_vacation_planning_request_view_search" model="ir.ui.view">
            <field name="name">hr.vacation.planning.request.search</field>
            <field name="model">hr.vacation.planning.request</field>
            <field name="arch" type="xml">
                <search>
                    <field name="state"/>

                    <filter name="filter_draft" string="Draft" domain="[('state', '=','draft')]"/>
                    <filter name="filter_pending" string="Pending" domain="[('state', '=','pending')]"/>
                    <filter name="filter_cancelled" string="Cancelled" domain="[('state', '=','cancelled')]"/>
                    <filter name="filter_approved" string="Approved" domain="[('state', '=','approved')]"/>
                    <filter name="filter_rejected" string="Rejected" domain="[('state', '=','rejected')]"/>
                    <filter name="filter_replanned" string="Replanned" domain="[('state', '=','replanned')]"/>

                    <group expand="0" name="group_by" string="Group By">
                        <filter name="group_state" string="State" context="{'group_by' : 'state'}"/>
                        <filter name="group_employee_requests_id" string="Employee"
                                context="{'group_by' : 'employee_requests_id'}"/>
                        <filter name="group_department_employee_requests_id" string="Department"
                                context="{'group_by' : 'department_employee_requests_id'}"/>
                    </group>

                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="vacation_planning_request_action_my">
            <field name="name">My vacation planning request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.vacation.planning.request</field>
            <field name="view_mode">calendar,kanban,tree,form</field>
            <field name="domain">[('user_employee_requests_id', '=',uid)]</field>
            <field name="context">{
                    'invisible_employee_requests_id': False,
                    "search_default_group_state": 1,
                    "create_edit_without_restrictions": False,
            }</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">My vacation planning request.
                </p>
            </field>
        </record>
        <record model="ir.actions.act_window" id="vacation_planning_request_action_from_my_department">
            <field name="name">Vacation planning request from my department</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.vacation.planning.request</field>
            <field name="view_mode">calendar,kanban,tree,form</field>
            <field name="domain">[('user_manager_department_employee_requests_id', '=',uid)]</field>
            <field name="context">{
                "search_default_group_employee_requests_id": 1,
                "search_default_group_state": 1,
                "create_edit_without_restrictions": False,
                }
            </field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">Vacation planning request from my department.
                </p>
            </field>
        </record>
        <record model="ir.actions.act_window" id="vacation_planning_request_action_all">
            <field name="name">All vacation planning request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.vacation.planning.request</field>
            <field name="view_mode">calendar,kanban,tree,form</field>
            <field name="domain">[]</field>
            <field name="context">{
                "search_default_group_department_employee_requests_id": 1,
                "search_default_group_employee_requests_id": 1,
                "search_default_group_state": 1,
                "create_edit_without_restrictions": True,
                }
            </field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">All vacation planning request.
                </p>
            </field>
        </record>

        <record id="view_print_vacation_planning_request" model="ir.ui.view">
            <field name="name">hr.print.vacation.planning.request.form</field>
            <field name="model">hr.print.vacation.planning.request</field>
            <field name="arch" type="xml">
                <form string="Print vacation planning request">
                    <group>
                        <group>
                            <field name="date_from"/>
                        </group>
                        <group>
                            <field name="date_to"/>
                        </group>
                    </group>
                    <footer>
                        <button name="action_print_vpr" string="Print" type="object" class="btn-primary"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>
        <record id="print_planning_request" model="ir.actions.act_window">
            <field name="name">Imprimir planificación de vacaciones</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.print.vacation.planning.request</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_print_vacation_planning_request"/>
            <field name="target">new</field>
        </record>

        <record id="view_print_vacation_planning_request_all" model="ir.ui.view">
            <field name="name">hr.print.vacation.planning.request.all.form</field>
            <field name="model">hr.print.vacation.planning.request.all</field>
            <field name="inherit_id" ref="view_print_vacation_planning_request"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_print_vpr']" position="replace">
                    <button name="action_print_vpr" string="Print" type="object" class="btn-primary"/>
                </xpath>
            </field>
        </record>
        <record id="print_planning_request_all" model="ir.actions.act_window">
            <field name="name">Imprimir planificación de vacaciones</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.print.vacation.planning.request.all</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_print_vacation_planning_request_all"/>
            <field name="target">new</field>
        </record>

<!--        <record id="action_planning_request_wizard" model="ir.actions.server">-->
<!--            <field name="model_id" ref="hr_dr_vacations.model_hr_vacation_planning_request"/>-->
<!--            <field name="name">Solicitud de planificación de vacaciones (Excel)</field>-->
<!--            <field name="key2">client_print_multi</field>-->
<!--            <field name="value" eval="'ir.actions.act_window,' +str(ref('print_planning_request'))"/>-->
<!--            <field name="key">action</field>-->
<!--            <field name="model">hr.vacation.planning.request</field>-->
<!--        </record>-->
        <report
            id="action_print_vacation_planning_request"
            string="Imprimir solicitud de planificación de vacaciones"
            model="hr.vacation.planning.request"
            report_type="xlsx"
            name="hr_dr_vacations.report_vacation_xls"
            file="hr_dr_vacations.report_vacation_xls"
            menu="False"
        />

        <record model="ir.actions.act_window" id="vacation_planning_request_action_notifications_to_process">
            <field name="name">Notifications to process for vacation planning request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.notifications</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[
                ('res_model', '=', 'hr.vacation.planning.request'),
                ('user_employee_approve_id', '=',uid),
                ('send', '=',True),
                ('state', '=','pending'),
                ('processed', '=',False)
                ]
            </field>
            <field name="context">{
                    'invisible_res_model_id': True,
                    'invisible_res_id': True,
            }</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">Notifications to process for vacation planning request.
                </p>
            </field>
        </record>
        <record model="ir.actions.act_window" id="vacation_planning_request_action_notifications_all">
            <field name="name">All notifications for vacation planning request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.notifications</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[
                ('res_model', '=', 'hr.vacation.planning.request')
                ]
            </field>
            <field name="context">{
                    'invisible_res_model_id': True,
                    'invisible_res_id': True,
            }</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">All notifications for vacation planning request.
                </p>
            </field>
        </record>
        <!--Vacation planning request-->

        <!--Vacation execution request-->
        <record id="hr_vacation_execution_request_view_calendar" model="ir.ui.view">
            <field name="name">hr.vacation.execution.add.view.calendar</field>
            <field name="model">hr.vacation.execution.request</field>
            <field name="arch" type="xml">
                <calendar string="Vacation execution request" date_start="date_from" date_stop="date_to" mode="month"
                          quick_add="False" color="state">
                    <field name="display_name"/>
                </calendar>
            </field>
        </record>
        <record id="hr_vacation_execution_request_view_kanban" model="ir.ui.view">
            <field name="name">hr.vacation.execution.add.view.kanban</field>
            <field name="model">hr.vacation.execution.request</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="employee_requests_id"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="date_incorporation"/>
                    <field name="number_of_days"/>
                    <field name="state"/>
                    <field name="commentary"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click container">
                                <div class="row no-gutters">
                                    <div class="col-2">
                                        <img t-att-src="kanban_image('hr.employee', 'image_small', record.employee_requests_id.raw_value)"
                                             t-att-title="record.employee_requests_id.value"
                                             t-att-alt="record.employee_requests_id.value"
                                             width="40" height="40"
                                             class="oe_kanban_avatar float-left mr4 col-md-"/>
                                    </div>
                                    <div class="col-10">
                                        <span class="badge badge-pill float-right mt4 mr16">
                                            <t t-esc="record.number_of_days.value"/>
                                            Día(s)
                                        </span>
                                        <strong class="o_kanban_record_title">
                                            <t t-esc="record.employee_requests_id.value"/>
                                        </strong>
                                        <div class="o_dropdown_kanban dropdown" groups="base.group_user">
                                            <a role="button" class="dropdown-toggle o-no-caret btn"
                                               data-toggle="dropdown" href="#" aria-label="Dropdown menu"
                                               title="Opciones">
                                                <span class="fa fa-ellipsis-v"/>
                                            </a>
                                            <div class="dropdown-menu" role="menu">

                                                <a t-if="record.state.raw_value == 'draft'" role="menuitem" type="edit"
                                                   class="dropdown-item">Edit Request
                                                </a>

                                                <a t-if="record.state.raw_value == 'draft'" role="menuitem"
                                                   type="delete" class="dropdown-item">Delete Request
                                                </a>

                                                <a t-if="record.state.raw_value == 'draft'"
                                                   name="confirm_request" type="object"
                                                   role="menuitem" class="dropdown-item">Confirm Request
                                                </a>

                                                <a t-if="record.state.raw_value == 'pending'"
                                                   name="cancel_request" type="object"
                                                   role="menuitem" class="dropdown-item">Cancel Request
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row no-gutters justify-content-end">
                                    <div class="col-4">
                                        <span class="text-muted">Inicio:</span>
                                    </div>
                                    <div class="col-8">
                                        <t t-esc="record.date_from.value"/>
                                    </div>
                                    <div class="w-100"></div>
                                    <div class="col-4">
                                        <span class="text-muted">Fin:</span>
                                    </div>
                                    <div class="col-8">
                                        <t t-esc="record.date_to.value"/>
                                    </div>
                                    <div class="w-100"></div>
                                    <div class="col-4">
                                        <span class="text-muted">Incorporación:</span>
                                    </div>
                                    <div class="col-8">
                                        <t t-esc="record.date_incorporation.value"/>
                                    </div>
                                    <div class="w-100"></div>
                                    <div class="col-4">
                                        <span class="text-muted">Estado:</span>
                                    </div>
                                    <div class="col-8">
                                        <t t-esc="record.state.value"/>
                                    </div>
                                    <div class="w-100"></div>
                                    <div class="col-4">
                                        <span class="text-muted">Comentario:</span>
                                    </div>
                                    <div class="col-8">
                                        <t t-esc="record.commentary.value"/>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <record id="hr_vacation_execution_request_view_tree" model="ir.ui.view">
            <field name="name">hr.vacation.execution.add.view.tree</field>
            <field name="model">hr.vacation.execution.request</field>
            <field name="arch" type="xml">
                <tree decoration-danger="state == 'rejected'" decoration-success="state == 'approved'" decoration-muted="state in ['replanned','cancelled','draft']" decoration-primary="state == 'pending'">
                    <field name="employee_requests_id" invisible="context.get('invisible_employee_requests_id',False)"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="date_incorporation"/>
                    <field name="number_of_days"/>
                    <field name="state"/>
                    <field name="commentary"/>
                    <!--                    <button string="Confirm Request" icon="fa-check" type="object"
                                            name="confirm_vacation_execution_request"
                                            confirm="¿Está seguro que desea confirmar esta solicitud de planificación de vacaciones?"
                                            attrs="{'invisible': [('state', '!=', 'draft')]}"></button>

                                        <button string="Cancel Request" icon="fa-ban" type="object"
                                            name="cancel_vacation_execution_request"
                                            confirm="¿Está seguro que desea cancelar esta solicitud de planificación de vacaciones?"
                                            attrs="{'invisible': [('state', '!=', 'pending')]}"></button>-->

                </tree>
            </field>
        </record>
        <record id="hr_vacation_execution_request_view_form" model="ir.ui.view">
            <field name="name">hr.vacation.execution.add.view.form</field>
            <field name="model">hr.vacation.execution.request</field>
            <field name="arch" type="xml">
                <form string="Vacation execution request">
                    <header>
<!--                        <button string="Buscar períodos" type="object"-->
<!--                                name="search_periods"-->
<!--                                attrs="{'invisible': ['|',('state', '!=', 'draft'),('occupy_current_period', '=', True)]}"/>-->

                        <button string="Confirm request" type="object"
                                name="confirm_request"
                                confirm="¿Está seguro de que desea confirmar esta solicitud de vacaciones?"
                                attrs="{'invisible': [('state', '!=', 'draft')]}"/>

                        <button string="Confirmar solicitud por el administrador" type="object"
                                name="confirm_vacation_execution_request_direct"
                                groups="hr_dr_vacations.hr_dr_vacations_group_supervisor"
                                confirm="¿Está seguro de que desea confirmar esta solicitud de vacaciones?"
                                attrs="{'invisible': [('state', '!=', 'draft')]}"/>

                        <button string="Cancel request" type="object"
                                name="cancel_request"
                                confirm="¿Está seguro de que desea cancelar esta solicitud de vacaciones?"
                                attrs="{'invisible': [('state', '!=', 'pending')]}"/>

                        <button string="Cancel request by admin" type="object"
                                name="cancel_request"
                                confirm="¿Está seguro de que desea cancelar esta solicitud de vacaciones?"
                                groups="hr_dr_vacations.hr_dr_vacations_group_supervisor"
                                attrs="{'invisible': [('state', 'in', ['draft','cancelled','rejected'])]}"/>

                        <button string="Print" type="object"
                                name="print_vacation_execution_request" class="btn-primary oe_read_only"
                                groups="hr_dr_vacations.hr_dr_vacations_group_employee"
                                attrs="{'invisible': [('state', '!=', 'approved')]}"/>


                        <field name="state" widget="statusbar" statusbar_visible="draft,pending,cancelled,approved,rejected,replanned"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="employee_requests_id" invisible="context.get('invisible_employee_requests_id',False)"
                                       attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="date_from" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                                <field name="date_to" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            </group>
                            <group>
                                <field name="date_incorporation"/>
                                <field name="number_of_days"/>
                                <field name="occupy_current_period" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="total_vacations_available" readonly="1" force_save="1"/>
                            </group>
                            <group>
                                <field name="total_vacations_available_including_proportional_period" readonly="1" force_save="1"/>
                            </group>
                        </group>
                        <group>
                            <field name="commentary" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        </group>
                        <notebook>
                            <page string="Occupy periods">
                                <field
                                        name="occupy_period_ids"
                                        nolabel="1" context="{'default_vacation_execution_request_id':id}" attrs="{'readonly': ['|',('state', '!=', 'draft'),('occupy_current_period', '=', True)], 'required': [('occupy_current_period', '=', False)]}">
                                    <tree editable="bottom">
                                        <field name="vacation_execution_request_id" invisible="1"/>
                                        <field name="employee_requests_id" invisible="1"/>
                                        <field name="period_id" options="{'no_create': True}" domain = "[('employee_id', '=', employee_requests_id),('available', '>', 0)]"/>
                                        <field name="available" force_save="1"/>
                                        <field name="amount"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Tracing">
                                <field
                                        name="notification_ids"
                                        nolabel="1">
                                    <tree>
                                        <field name="level"/>
                                        <field name="employee_approve_id"/>
                                        <field name="commentary"/>
                                        <field name="state"/>
                                        <field name="send"/>
                                        <field name="processed"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Details">
                                <group>
                                    <group>
                                        <field name="user_confirmation"/>
                                        <field name="user_cancellation"/>
                                    </group>
                                    <group>
                                        <field name="date_confirmation"/>
                                        <field name="date_cancellation"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="message_ids"/>
                    </div>
                </form>
            </field>
        </record>
        <record id="hr_vacation_execution_request_view_search" model="ir.ui.view">
            <field name="name">hr.vacation.execution.add.view.search</field>
            <field name="model">hr.vacation.execution.request</field>
            <field name="arch" type="xml">
                <search>
                    <field name="state"/>

                    <filter name="filter_draft" string="Draft" domain="[('state', '=','draft')]"/>
                    <filter name="filter_pending" string="Pending" domain="[('state', '=','pending')]"/>
                    <filter name="filter_cancelled" string="Cancelled" domain="[('state', '=','cancelled')]"/>
                    <filter name="filter_approved" string="Approved" domain="[('state', '=','approved')]"/>
                    <filter name="filter_rejected" string="Rejected" domain="[('state', '=','rejected')]"/>
                    <filter name="filter_replanned" string="Replanned" domain="[('state', '=','replanned')]"/>

                    <group expand="0" name="group_by" string="Group By">
                        <filter name="group_state" string="State" context="{'group_by' : 'state'}"/>
                        <filter name="group_employee_requests_id" string="Employee"
                                context="{'group_by' : 'employee_requests_id'}"/>
                        <filter name="group_department_employee_requests_id" string="Department"
                                context="{'group_by' : 'department_employee_requests_id'}"/>
                    </group>

                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="vacation_execution_request_action_my">
            <field name="name">My vacation execution request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.vacation.execution.request</field>
            <field name="view_mode">calendar,kanban,tree,form</field>
            <field name="domain">[('user_employee_requests_id', '=',uid)]</field>
            <field name="context">{
                    'invisible_employee_requests_id': True,
                    'search_default_group_state': 1,
                    'create_edit_without_restrictions': False,
            }</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">My vacation execution request.
                </p>
            </field>
        </record>
        <record model="ir.actions.act_window" id="vacation_execution_request_action_from_my_department">
            <field name="name">Vacation execution request from my department</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.vacation.execution.request</field>

            <field name="view_mode">calendar,kanban,tree,form</field>
            <field name="domain">[('user_manager_department_employee_requests_id', '=',uid)]</field>
            <field name="context">{
                "search_default_group_employee_requests_id": 1,
                "search_default_group_state": 1,
                "create_edit_without_restrictions": False,
                }
            </field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">Vacation execution request from my department.
                </p>
            </field>
        </record>
        <record model="ir.actions.act_window" id="vacation_execution_request_action_all">
            <field name="name">All vacation execution request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.vacation.execution.request</field>

            <field name="view_mode">calendar,kanban,tree,form</field>
            <field name="domain">[]</field>
            <field name="context">{
                "search_default_group_department_employee_requests_id": 1,
                "search_default_group_employee_requests_id": 1,
                "search_default_group_state": 1,
                "create_edit_without_restrictions": True,
                }
            </field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">All vacation execution request.
                </p>
            </field>
        </record>

        <record model="ir.actions.act_window" id="vacation_execution_request_action_notifications_to_process">
            <field name="name">Notifications to process for vacation execution request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.notifications</field>

            <field name="view_mode">tree,form</field>
            <field name="domain">[
                ('res_model', '=', 'hr.vacation.execution.request'),
                ('user_employee_approve_id', '=',uid),
                ('send', '=',True),
                ('state', '=','pending'),
                ('processed', '=',False)
                ]
            </field>
            <field name="context">{
                    'invisible_res_model_id': True,
                    'invisible_res_id': True,
            }</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">Notifications to process for vacation execution request.
                </p>
            </field>
        </record>
        <record model="ir.actions.act_window" id="vacation_execution_request_action_notifications_all">
            <field name="name">All notifications for vacation execution request</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.notifications</field>

            <field name="view_mode">tree,form</field>
            <field name="domain">[
                ('res_model', '=', 'hr.vacation.execution.request')
                ]
            </field>
            <field name="context">{
                    'invisible_res_model_id': True,
                    'invisible_res_id': True,
            }</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">All notifications for vacation execution request.
                </p>
            </field>
        </record>
        <!--Vacation execution request-->

        <!--Vacation summary-->
        <record model="ir.ui.view" id="vacation_summary_form">
			<field name="name">Vacation Summary Form</field>
			<field name="model">hr.employee</field>
            <field name="priority">50</field>
			<field name="arch" type="xml">
				<form string="Vacation Summary" create="false" edit="false" delete="false">
                    <!--<header>-->
                        <!--<button string="Export" type="object"-->
                                <!--name="export_vacation_resume" class="btn-primary oe_read_only"-->
                                <!--groups="hr_dr_vacations.hr_dr_vacations_group_employee"/>-->
                    <!--</header>-->
					<sheet>
                        <h1>Vacations</h1>
						<group>
                            <group string="Previous periods">
                                <field name="total_time_in_company_years"/>
                                <field name="total_time_in_company_months"/>
                                <field name="total_time_in_company_days"/>
                            </group>
                            <group string="Cutoff date">
                                <field name="cutoff_date" readonly="1"/>
                                <field name="vacations_cutoff_date" readonly="1"/>
                                <field name="vacations_taken_cutoff_date" readonly="1"/>
                                <field name="total_vacations_accumulated_cutoff_date" readonly="1"/>
                            </group>
                        </group>
                        <group>
                            <group>
                                <field name="last_company_entry_date" readonly="1"/>
                            </group>
                            <group>
                                <field name="total_vacations_available" readonly="1"/>
                                <field name="total_vacations_available_including_proportional_period" readonly="1"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Details">
                                <field name="vacation_detail_ids" nolabel="1" readonly="1">
                                    <tree decoration-danger="lost &gt; 0" decoration-success="available &gt; 0 and ready_to_lost == True">
                                        <field name="sequence"/>
                                        <field name="type"/>
                                        <field name="date_from"/>
                                        <field name="date_to"/>
                                        <field name="days"/>
                                        <field name="standard_accumulated"/>
                                        <field name="accumulated_by_seniority"/>
                                        <field name="increase_by_age"/>

                                        <field name="total_accumulated"/>
                                        <field name="total_accumulated_worked"/>
                                        <field name="total_accumulated_not_worked"/>

                                        <field name="taken"/>
                                        <field name="lost"/>
                                        <field name="ready_to_lost" invisible="1"/>
                                        <field name="vacation_execution"/>
                                        <field name="permissions"/>
                                        <field name="available"/>

                                        <button name="open_register_lost" string="Register vacation lost" type="object" icon="fa-level-down" attrs="{'invisible': ['|',('available', '&lt;=', 0),('ready_to_lost', '=', False)]}"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
					</sheet>
				</form>
			</field>
		</record>
        <record model="ir.ui.view" id="vacation_summary_tree">
			<field name="name">Vacation Summary</field>
			<field name="model">hr.employee</field>
            <field name="priority">50</field>
			<field name="arch" type="xml">
				<tree string="Vacation summary" create="false" edit="false" delete="false">
					<field name="name" />
                    <field name="department_id" />
					<field name="total_vacations_available" />
					<field name="total_vacations_available_including_proportional_period" />
				</tree>
			</field>
		</record>
        <record model="ir.ui.view" id="vacation_summary_search_view">
			<field name="name">Vacation Summary</field>
			<field name="model">hr.employee</field>
			<field name="arch" type="xml">
				<search string="Search employee">
					<field name="name"/>
					<field name="department_id" />
					<group expand="0" string="Group By">
						<filter string="Department" name="group_by_department" context="{'group_by': 'department_id'}" />
					</group>
				</search>
			</field>
		</record>

        <record model="ir.actions.act_window" id="vacation_summary_action_my">
            <field name="name">My vacation summary</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.employee</field>

            <field name="view_mode">tree,form</field>
            <field name="domain">[('user_id', '=',uid)]</field>
            <field name="search_view_id" ref="hr_dr_vacations.vacation_summary_search_view"/>
            <field name="view_ids"
                   eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('hr_dr_vacations.vacation_summary_tree')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('hr_dr_vacations.vacation_summary_form')})]"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">My vacation execution request.
                </p>
            </field>
        </record>
        <record model="ir.actions.act_window" id="vacation_summary_action_from_my_department">
            <field name="name">Vacation summary from my department</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.employee</field>

            <field name="view_mode">tree,form</field>
            <field name="domain">[('department_id.manager_id.user_id.id', '=',uid)]</field>
            <field name="search_view_id" ref="hr_dr_vacations.vacation_summary_search_view"/>
            <field name="view_ids"
                   eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('hr_dr_vacations.vacation_summary_tree')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('hr_dr_vacations.vacation_summary_form')})]"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">Vacation summary from my department.
                </p>
            </field>
        </record>
        <record model="ir.actions.act_window" id="vacation_summary_action_all">
            <field name="name">All vacation summary</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.employee</field>

            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
            <field name="context">{'search_default_group_by_department': True}
            </field>
            <field name="search_view_id" ref="hr_dr_vacations.vacation_summary_search_view"/>
            <field name="view_ids"
                   eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('hr_dr_vacations.vacation_summary_tree')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('hr_dr_vacations.vacation_summary_form')})]"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_smiling_face">All vacation summary.
                </p>
            </field>
        </record>

        <record id="print_planning_request" model="ir.actions.act_window">
            <field name="name">Exportar resumen de vacaciones</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hr.print.vacation.planning.request</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_print_vacation_planning_request"/>
            <field name="target">new</field>
        </record>
        <report
            id="action_print_vacation_summary"
            string="Vacation resume"
            model="hr.employee"
            report_type="xlsx"
            name="hr_dr_vacations.report_vacation_summary"
            file="Vacation resume"
            menu="True"
        />
        <!--Vacation summary-->
    </data>
</odoo>